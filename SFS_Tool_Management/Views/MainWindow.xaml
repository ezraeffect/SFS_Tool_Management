<Window x:Class="SFS_Tool_Management.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:SFS_Tool_Management"
        mc:Ignorable="d"
        Title="MainWindow" Height="960" Width="1440">
    
    <!-- 서랍 메뉴 Storyboard -->
    <Window.Resources>
        <!-- 여는 애니메이션 -->
        <Storyboard x:Key="OpenMenu">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)" Storyboard.TargetName="GridMenu">
                <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="256">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CubicEase EasingMode="EaseInOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="GridBackground">
                <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="1">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CubicEase EasingMode="EaseInOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>

        <!-- 닫는 애니메이션 -->
        <Storyboard x:Key="CloseMenu">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)" Storyboard.TargetName="GridMenu">
                <EasingDoubleKeyFrame KeyTime="0" Value="256"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CubicEase EasingMode="EaseInOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="GridBackground">
                <EasingDoubleKeyFrame KeyTime="0" Value="1"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CubicEase EasingMode="EaseInOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>

        <Geometry x:Key="DashboardIcon">M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2m0 16H5V5h14zM9 17H7v-5h2zm4 0h-2V7h2zm4 0h-2v-7h2z</Geometry>
        <!--특정 조건에서만 보이는 옵션-->
        <BooleanToVisibilityConverter x:Key="BoolToVis" />

    </Window.Resources>

    <!-- 애니메이션 이벤트 트리거 -->
    <Window.Triggers>
        <EventTrigger RoutedEvent="Button.Click" SourceName="button_DrawOpen">
            <BeginStoryboard Storyboard="{StaticResource OpenMenu}"/>
        </EventTrigger>
        <EventTrigger RoutedEvent="Button.Click" SourceName="button_DrawClose">
            <BeginStoryboard Storyboard="{StaticResource CloseMenu}"/>
        </EventTrigger>
    </Window.Triggers>
    
    <!-- MainWindow Grid -->
    <Grid>
        <!-- Draw Menu 열릴때 반응하는 Grid -->
        <Grid x:Name="GridBackground" Background="LightGray" Opacity="0"/>

        <!-- Navigation Grid -->
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="64"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Page 표시용 Frame-->
            <Frame Grid.Row="1" x:Name="MainFrame" NavigationUIVisibility="Hidden"/>

            <!-- 사용자 표시용 StackPanel -->
            <StackPanel x:Name="user_Profile" Orientation="Horizontal" Margin="0 10 10 10" 
                        HorizontalAlignment="Right" Width="200" Height="50">
                <ContentControl Content="{Binding CurrentPage}" />
                <StackPanel Orientation="Vertical" Width="Auto" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0 0 8 0">
                    <TextBlock Text="{Binding CurrentUser.DisplayName, Mode=OneWay}" FontSize="14" FontFamily="Segoe UI" FontWeight="SemiBold" Margin="2" HorizontalAlignment="Right"/>
                    <TextBlock Text="{Binding CurrentUser.Department, Mode=OneWay}" FontSize="12" FontFamily="Segoe UI" Margin="2" HorizontalAlignment="Right"/>
                </StackPanel>
                <Ellipse Width="40" Height="40" Margin="2 2 2 2" Fill="#d7d7d7"></Ellipse>
            </StackPanel>


            <StackPanel Grid.Row="0" HorizontalAlignment="Left" Orientation="Horizontal">
                <!-- Draw Menu 열기 Btn -->
                <Button x:Name="button_DrawOpen" Style="{StaticResource IndentLeftButtonStyle}" HorizontalAlignment="Left" VerticalAlignment="Center" Width="48" Height="48" Margin="8"/>
                <TextBlock x:Name="textBlock_PageTitle" Text="Dashboard" HorizontalAlignment="Left" VerticalAlignment="Center" FontSize="24" FontFamily="Segoe UI" FontWeight="SemiBold" Margin="10 0 0 0"/>
            </StackPanel>
            
        </Grid>
        
        <!-- Draw Menu Grid -->
        <Grid x:Name="GridMenu" Width="256" HorizontalAlignment="Left" Margin="-256,0,0,0" Background="White">
            <!-- 애니메이션 사용 관련 선언 -->
            <Grid.RenderTransform>
                <TransformGroup>
                    <ScaleTransform/>
                    <SkewTransform/>
                    <RotateTransform/>
                    <TranslateTransform/>
                </TransformGroup>
            </Grid.RenderTransform>

            <!-- 메뉴 전환 Btn Gird -->
            <StackPanel Orientation="Vertical">
                <!-- Draw Menu 닫기 Btn -->
                <Button x:Name="button_DrawClose" Style="{StaticResource IndentRightButtonStyle}" HorizontalAlignment="Left" VerticalAlignment="Top" Width="48" Height="48" Content="닫기" Margin="8"/>

                <TextBlock Text="Tool Management" FontFamily="Segoe UI" FontSize="20" FontWeight="Bold" Margin="10"/>

                <Button x:Name="button_ShowDashboard" Style="{StaticResource DrawDashboardButtonStyle}" Content="Dashboard" Height="40" FontFamily="Segoe UI" FontSize="15" FontWeight="DemiBold" Click="button_ShowDashboard_Click"/>
                <Button x:Name="button_ShowToolList" Style="{StaticResource DrawToolListButtonStyle}" Content="Tool List" Height="40" FontFamily="Segoe UI" FontSize="15" FontWeight="DemiBold" Click="button_ShowToolList_Click"/>
                <Button x:Name="button_ShowRentalHistory" Style="{StaticResource DrawRentalHistoryButtonStyle}" Content="Rental History" Height="40" FontFamily="Segoe UI" FontSize="15" FontWeight="DemiBold" Click="button_ShowRentalHistory_Click"/>
                <Border Height="665"/>
                <Button x:Name="button_ShowAdminOption" Content="Administrator" Height="40" FontFamily="Segoe UI" FontSize="15" VerticalAlignment="Bottom" FontWeight="DemiBold" Visibility="{Binding CurrentUser.IsAdmin, Converter={StaticResource BoolToVis}}" Click="button_ShowAdminOption_Click" />
                <!-- <Button x:Name="button_ShowFuncTest" Style="{StaticResource DrawDashboardButtonStyle}" Content="USING ONLY TEST" Height="40" FontFamily="Segoe UI" FontSize="15" FontWeight="DemiBold" Click="button_ShowFuncTest_Click"/> -->
            </StackPanel>
        </Grid>
    </Grid>
</Window>
